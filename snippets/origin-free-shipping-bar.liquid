{% comment %}
  Origin Luxury – Free Shipping Progress Bar
  Threshold is defined in cents via free_shipping_threshold.
  Example: 30000 = $300.00
{% endcomment %}

{%- assign free_shipping_threshold = settings.cart_free_shipping_threshold | default: 30000 | plus: 0 -%}
{%- assign cart_total = cart.total_price | default: 0 -%}

{%- if cart_total <= 0 -%}
  {%- comment -%} No items yet, don't show the bar. {%- endcomment -%}
{%- else -%}
  {%- if cart_total >= free_shipping_threshold -%}
    {%- assign progress = 100 -%}
  {%- else -%}
    {%- assign progress = cart_total | times: 100 | divided_by: free_shipping_threshold -%}
  {%- endif -%}

  <div class="origin-freeship{% if cart_total >= free_shipping_threshold %} origin-freeship--achieved{% endif %}">
    {%- if cart_total >= free_shipping_threshold -%}
      <p class="origin-freeship__text">
        You’ve unlocked free shipping.
      </p>
    {%- else -%}
      {%- assign remaining = free_shipping_threshold | minus: cart_total -%}
      <p class="origin-freeship__text">
        Spend {{ remaining | money }} more to unlock free shipping.
      </p>
    {%- endif -%}

    <div class="origin-freeship__bar">
      <span class="origin-freeship__fill" style="width: {{ progress }}%;"></span>
    </div>
  </div>
{%- endif -%}