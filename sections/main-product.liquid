{{ 'product.css' | asset_url | stylesheet_tag }}

<section id="MainProduct-{{ section.id }}" class="page-width main-product-section" data-section="{{ section.id }}">
  
  <div class="product-grid">
    
    <!-- LEFT COLUMN: Vertical Image Stack (Gucci Style) -->
    <div class="product-media-wrapper">
      {% if product.media.size > 0 %}
        {% for media in product.media %}
          <div class="product-media-item">
            <img 
              src="{{ media | image_url: width: 1200 }}" 
              alt="{{ media.alt | escape }}"
              width="1200"
              height="{{ 1200 | divided_by: media.aspect_ratio | ceil }}"
              loading="{% if forloop.first %}eager{% else %}lazy{% endif %}"
              class="product-image"
            >
          </div>
        {% endfor %}
      {% else %}
        <!-- Fallback if no images -->
        <div class="product-media-placeholder">
          {{ 'product-1' | placeholder_svg_tag: 'placeholder-svg' }}
        </div>
      {% endif %}
    </div>

    <!-- RIGHT COLUMN: Sticky Details -->
    <div class="product-info-wrapper">
      <div class="product-info-sticky">
        
        {%- assign product_form_id = 'product-form-' | append: section.id -%}

        <!-- Brand / Vendor (Optional, small top label) -->
        <div class="product-vendor">{{ product.vendor }}</div>

        <!-- Title -->
        <h1 class="product-title">{{ product.title | escape }}</h1>

        <!-- Price -->
        <div class="product-price-container">
          <span class="price">{{ product.price | money }}</span>
          {% if product.compare_at_price > product.price %}
            <span class="price-compare">{{ product.compare_at_price | money }}</span>
          {% endif %}
        </div>

        <!-- Description (Short) -->
        <div class="product-description rte">
          {{ product.description }}
        </div>

        <!-- Add to Cart Form -->
        <form method="post" action="/cart/add" id="{{ product_form_id }}" accept-charset="UTF-8" class="product-form" enctype="multipart/form-data">
          <input type="hidden" name="form_type" value="product">
          <input type="hidden" name="utf8" value="âœ“">
          <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
          
          <div class="product-form__buttons">
            <button
              type="submit"
              name="add"
              class="product-form__submit button button--full-width"
              {% if product.selected_or_first_available_variant.available == false %}disabled{% endif %}
            >
              <span>
                {%- if product.selected_or_first_available_variant.available -%}
                  ADD TO SHOPPING BAG
                {%- else -%}
                  SOLD OUT
                {%- endif -%}
              </span>
            </button>
          </div>
        </form>

        <!-- Extra Details (Gucci Style Accordions Placeholder) -->
        <div class="product-extra-details">
          <div class="detail-row">
            <span>Product Details</span>
            <span>+</span>
          </div>
          <div class="detail-row">
            <span>Shipping & Returns</span>
            <span>+</span>
          </div>
        </div>

      </div>
    </div>

  </div>
</section>

<style>
  /* --- LAYOUT --- */
  .main-product-section {
    padding-top: 2rem;
    padding-bottom: 4rem;
  }

  .product-grid {
    display: grid;
    grid-template-columns: 1fr; /* Mobile: 1 column */
    gap: 2rem;
  }

  /* DESKTOP: Split Screen (60% Images / 40% Text) */
  @media screen and (min-width: 990px) {
    .product-grid {
      grid-template-columns: 1.5fr 1fr; 
      gap: 6rem; /* Wide spacious gap */
      align-items: start; /* Important for sticky to work */
    }
    
    .product-info-sticky {
      position: -webkit-sticky;
      position: sticky;
      top: 140px; /* Stays below the header */
      padding-right: 2rem;
    }
  }

  /* --- IMAGES --- */
  .product-media-wrapper {
    display: flex;
    flex-direction: column;
    gap: 4px; /* Tiny gap between images like Gucci */
  }

  .product-image {
    width: 100%;
    height: auto;
    display: block;
    background-color: #f5f5f5; /* Subtle background while loading */
  }

  /* --- TYPOGRAPHY & DETAILS --- */
  .product-vendor {
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: #666;
    margin-bottom: 1rem;
  }

  .product-title {
    font-family: var(--font-heading-family);
    font-size: 2.2rem;
    font-weight: 400; /* Gucci uses lighter weights */
    letter-spacing: 0.05em;
    line-height: 1.2;
    margin-bottom: 1.5rem;
    text-transform: uppercase;
  }

  .product-price-container {
    font-size: 1.2rem;
    color: #111;
    margin-bottom: 2rem;
  }

  .product-description {
    font-size: 1rem;
    line-height: 1.6;
    color: #333;
    margin-bottom: 3rem;
  }

  /* --- BUTTONS --- */
  .button--full-width {
    width: 100%;
    padding: 18px;
    background: #000;
    color: #fff;
    border: 1px solid #000;
    cursor: pointer;
    text-transform: uppercase;
    font-size: 0.9rem;
    letter-spacing: 0.1em;
    transition: all 0.3s ease;
  }
  .button--full-width:hover {
    background: #fff;
    color: #000;
  }

  /* --- EXTRA DETAILS --- */
  .product-extra-details {
    margin-top: 3rem;
    border-top: 1px solid #e5e5e5;
  }
  .detail-row {
    display: flex;
    justify-content: space-between;
    padding: 1.5rem 0;
    border-bottom: 1px solid #e5e5e5;
    cursor: pointer;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
</style>

{% schema %}
{
  "name": "Main Product",
  "tag": "section",
  "class": "section",
  "settings": []
}
{% endschema %}
