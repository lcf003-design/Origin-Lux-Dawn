{% comment %}
  Fresh Start Hero
  Contains: Navbar, Custom Cursor, Preloader, and 3D Parallax Hero
{% endcomment %}

{% comment %}
  theme-check-disable RemoteAsset
{% endcomment %}
<script src="https://cdn.tailwindcss.com" defer></script>
<script src="https://unpkg.com/lucide@latest" defer></script>
{% comment %}
  theme-check-enable RemoteAsset
{% endcomment %}

<style>
  html {
    scroll-behavior: smooth;
  }

  /* Custom Cursor */
  .custom-cursor {
    pointer-events: none;
    mix-blend-mode: difference;
    transition: transform 0.15s ease-out;
    z-index: 9999;
  }

  /* Floating Animations */
  @keyframes float-slow {
    0%,
    100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-20px);
    }
  }
  .animate-float-slow {
    animation: float-slow 6s ease-in-out infinite;
  }

  @keyframes float-medium {
    0%,
    100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-15px);
    }
  }
  .animate-float-medium {
    animation: float-medium 5s ease-in-out infinite;
  }

  /* Utilities */
  body.no-scroll {
    overflow: hidden;
  }
</style>

<div class="relative w-full bg-white font-sans text-black overflow-hidden">
  <!-- Preloader -->
  <div
    id="fs-preloader"
    class="fixed inset-0 z-[10000] flex items-center justify-center bg-black text-white transition-transform duration-1000 ease-[cubic-bezier(0.7,0,0.3,1)]"
  >
    <div class="overflow-hidden">
      <h1
        id="fs-preloader-text"
        class="text-4xl md:text-6xl font-black tracking-widest uppercase transition-transform duration-1000"
      >
        {{ section.settings.hero_headline | default: 'Origin Intl' }}
      </h1>
    </div>
  </div>

  <!-- Noise Overlay -->
  <div
    class="fixed inset-0 pointer-events-none z-[9998] opacity-[0.03] mix-blend-overlay"
    style="background-image: url('data:image/svg+xml,%3Csvg viewBox=\'0 0 200 200\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cfilter id=\'noiseFilter\'%3E%3CfeTurbulence type=\'fractalNoise\' baseFrequency=\'0.65\' numOctaves=\'3\' stitchTiles=\'stitch\'/%3E%3C/filter%3E%3Crect width=\'100%25\' height=\'100%25\' filter=\'url(%23noiseFilter)\'/%3E%3C/svg%3E')"
  ></div>

  <!-- Hero Section -->
  <section class="relative w-full overflow-hidden flex flex-col items-center justify-center bg-white {% if section.settings.hero_height_mobile == 'adapt' %}h-auto min-h-[400px]{% else %}{{ section.settings.hero_height_mobile }}{% endif %} md:{% if section.settings.hero_height_desktop == 'adapt' %}h-auto min-h-[500px]{% else %}{{ section.settings.hero_height_desktop }}{% endif %}">
    <!-- Background Image -->
    {%- if section.settings.bg_image != blank -%}
      <div class="z-0 overflow-hidden pointer-events-none {% if section.settings.hero_height_mobile == 'adapt' %}relative w-full h-auto{% else %}absolute inset-0{% endif %} md:{% if section.settings.hero_height_desktop == 'adapt' %}relative w-full h-auto{% else %}absolute inset-0{% endif %}">
        {%- comment -%} Desktop Image {%- endcomment -%}
        <img
          src="{{ section.settings.bg_image | image_url: width: 2400 }}"
          alt="{{ section.settings.bg_image.alt | escape }}"
          width="{{ section.settings.bg_image.width }}"
          height="{{ section.settings.bg_image.height }}"
          class="w-full {% if section.settings.hero_height_mobile == 'adapt' %}h-auto{% else %}h-full object-cover{% endif %} md:{% if section.settings.hero_height_desktop == 'adapt' %}h-auto{% else %}h-full object-cover{% endif %} transition-transform duration-700 ease-out {% if section.settings.bg_image_mobile != blank %}hidden md:block{% endif %}"
          style="transform: scale({{ section.settings.hero_bg_scale | divided_by: 100.0 }}); transform-origin: center;"
        >
        {%- comment -%} Mobile Image (Optional) {%- endcomment -%}
        {%- if section.settings.bg_image_mobile != blank -%}
          <img
            src="{{ section.settings.bg_image_mobile | image_url: width: 1200 }}"
            alt="{{ section.settings.bg_image_mobile.alt | default: section.settings.bg_image.alt | escape }}"
            width="{{ section.settings.bg_image_mobile.width }}"
            height="{{ section.settings.bg_image_mobile.height }}"
            class="w-full {% if section.settings.hero_height_mobile == 'adapt' %}h-auto{% else %}h-full object-cover{% endif %} md:{% if section.settings.hero_height_desktop == 'adapt' %}h-auto{% else %}h-full object-cover{% endif %} transition-transform duration-700 ease-out block md:hidden"
            style="transform: scale({{ section.settings.hero_bg_scale | divided_by: 100.0 }}); transform-origin: center;"
          >
        {%- endif -%}
      </div>
    {%- endif -%}
    <div
      class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-purple-100/60 rounded-full blur-[120px]"
    ></div>

    <div id="fs-parallax-container" class="absolute inset-0 z-10 overflow-hidden pointer-events-none">
      {%- if section.settings.parallax_img_1 != blank -%}
        <div
          class="parallax-layer absolute bottom-[5%] right-[2%] w-[28vw] md:w-[22vw] aspect-square rounded-full overflow-hidden shadow-2xl bg-gray-50 z-20"
          data-speed="40"
        >
          <img
            src="{{ section.settings.parallax_img_1 | image_url: width: 800 }}"
            width="{{ section.settings.parallax_img_1.width }}"
            height="{{ section.settings.parallax_img_1.height }}"
            alt="{{ section.settings.parallax_img_1.alt | escape }}"
            class="w-full h-full object-cover animate-float-slow mix-blend-multiply"
          >
        </div>
      {%- endif -%}
      {%- if section.settings.parallax_img_2 != blank -%}
        <div
          class="parallax-layer absolute top-[18%] left-[8%] w-[24vw] md:w-[18vw] aspect-square rounded-full overflow-hidden shadow-2xl bg-gray-50 z-10"
          data-speed="-25"
        >
          <img
            src="{{ section.settings.parallax_img_2 | image_url: width: 800 }}"
            width="{{ section.settings.parallax_img_2.width }}"
            height="{{ section.settings.parallax_img_2.height }}"
            alt="{{ section.settings.parallax_img_2.alt | escape }}"
            class="w-full h-full object-cover animate-float-slow opacity-90 mix-blend-multiply"
          >
        </div>
      {%- endif -%}
      {%- if section.settings.parallax_img_3 != blank -%}
        <div
          class="parallax-layer absolute top-[15%] right-[10%] w-[22vw] md:w-[16vw] aspect-square rounded-full overflow-hidden shadow-2xl bg-gray-50 z-10"
          data-speed="15"
        >
          <img
            src="{{ section.settings.parallax_img_3 | image_url: width: 800 }}"
            width="{{ section.settings.parallax_img_3.width }}"
            height="{{ section.settings.parallax_img_3.height }}"
            alt="{{ section.settings.parallax_img_3.alt | escape }}"
            class="w-full h-full object-cover animate-float-medium opacity-80 mix-blend-multiply"
          >
        </div>
      {%- endif -%}
      {%- if section.settings.parallax_img_4 != blank -%}
        <div
          class="parallax-layer absolute bottom-[15%] left-[5%] w-[20vw] md:w-[14vw] aspect-square rounded-full overflow-hidden shadow-2xl bg-gray-50 z-10"
          data-speed="-15"
        >
          <img
            src="{{ section.settings.parallax_img_4 | image_url: width: 800 }}"
            width="{{ section.settings.parallax_img_4.width }}"
            height="{{ section.settings.parallax_img_4.height }}"
            alt="{{ section.settings.parallax_img_4.alt | escape }}"
            class="w-full h-full object-cover animate-float-slow opacity-85 mix-blend-multiply"
          >
        </div>
      {%- endif -%}
      {%- if section.settings.parallax_img_5 != blank -%}
        <div
          class="parallax-layer absolute top-[8%] left-[45%] w-[18vw] md:w-[12vw] aspect-square rounded-full overflow-hidden shadow-2xl bg-gray-50 z-5"
          data-speed="30"
        >
          <img
            src="{{ section.settings.parallax_img_5 | image_url: width: 800 }}"
            width="{{ section.settings.parallax_img_5.width }}"
            height="{{ section.settings.parallax_img_5.height }}"
            alt="{{ section.settings.parallax_img_5.alt | escape }}"
            class="w-full h-full object-cover animate-float-medium opacity-75 mix-blend-multiply"
          >
        </div>
      {%- endif -%}
    </div>

    <div class="w-full relative z-30 flex flex-col items-center justify-center h-full pointer-events-none">
      <div
        id="fs-hero-cta"
        class="absolute bottom-24 flex flex-col items-center gap-6 pointer-events-auto transition-opacity duration-300"
      >
        <p class="text-gray-500 text-xs md:text-sm uppercase tracking-[0.3em]">
          {{ section.settings.hero_subheadline | default: 'Vanguard of Luxury' }}
        </p>
        <a
          href="{{ section.settings.hero_cta_link }}"
          class="px-8 py-3 bg-transparent border border-black text-black text-xs font-bold uppercase tracking-widest hover:bg-black hover:text-white transition-all duration-300"
        >
          {{ section.settings.hero_cta_label | default: 'Collection' }}
        </a>
      </div>
    </div>
  </section>
</div>

<script>
  (function () {
    function initFreshStartHero() {
      if (typeof lucide !== 'undefined') lucide.createIcons();

      // Preloader
      const preloader = document.getElementById('fs-preloader');
      const preloaderText = document.getElementById('fs-preloader-text');
      // Failsafe: Hide preloader after 3s max even if logic fails slightly
      if (preloader) {
        setTimeout(() => {
          if (preloaderText) preloaderText.style.transform = 'translateY(-100%)';
          preloader.style.transform = 'translateY(-100%)';
        }, 1500);
      }

      // Scroll Logic
      const heroCta = document.getElementById('fs-hero-cta');
      const layers = document.querySelectorAll('.parallax-layer');

      window.addEventListener('scroll', () => {
        const scrollY = window.scrollY;
        if (heroCta) heroCta.style.opacity = Math.max(0, 1 - scrollY / 200);
      });

      // Mouse Parallax - Cursor logic removed (handled globally)
      document.addEventListener('mousemove', (e) => {
        const x = (e.clientX / window.innerWidth) * 2 - 1;
        const y = (e.clientY / window.innerHeight) * 2 - 1;
        layers.forEach((layer) => {
          const speed = layer.getAttribute('data-speed');
          layer.style.transform = `translate(${x * speed}px, ${y * speed}px)`;
        });
      });
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initFreshStartHero);
    } else {
      initFreshStartHero();
    }
  })();
</script>

{% schema %}
{
  "name": "Fresh Start Hero",
  "settings": [
    { "type": "text", "id": "hero_headline", "label": "Headline", "default": "ORIGIN INTL" },
    { "type": "text", "id": "hero_subheadline", "label": "Subheadline", "default": "Vanguard of Luxury" },
    { "type": "text", "id": "hero_cta_label", "label": "CTA Label", "default": "Collection" },
    { "type": "url", "id": "hero_cta_link", "label": "CTA Link" },
    { "type": "header", "content": "Parallax Images" },
    { "type": "image_picker", "id": "parallax_img_1", "label": "Bottom Right" },
    { "type": "image_picker", "id": "parallax_img_2", "label": "Top Left" },
    { "type": "image_picker", "id": "parallax_img_3", "label": "Top Right" },
    { "type": "image_picker", "id": "parallax_img_4", "label": "Bottom Left" },
    { "type": "image_picker", "id": "parallax_img_5", "label": "Center Top" },
    { "type": "header", "content": "Background Settings" },
    { "type": "image_picker", "id": "bg_image", "label": "Background Image (Desktop)" },
    { "type": "image_picker", "id": "bg_image_mobile", "label": "Background Image (Mobile)" },
    {
      "type": "range",
      "id": "hero_bg_scale",
      "min": 100,
      "max": 200,
      "step": 5,
      "default": 100,
      "unit": "%",
      "label": "Background Image Scale"
    },
    { "type": "header", "content": "Section Layout" },
    {
      "type": "select",
      "id": "hero_height_desktop",
      "label": "Desktop Section Height",
      "options": [
        { "value": "h-screen", "label": "Full Screen" },
        { "value": "h-[80vh]", "label": "80% Height" },
        { "value": "h-[60vh]", "label": "60% Height" },
        { "value": "adapt", "label": "Adapt to Image" }
      ],
      "default": "h-screen"
    },
    {
      "type": "select",
      "id": "hero_height_mobile",
      "label": "Mobile Section Height",
      "options": [
        { "value": "h-screen", "label": "Full Screen" },
        { "value": "h-[80vh]", "label": "80% Height" },
        { "value": "h-[60vh]", "label": "60% Height" },
        { "value": "adapt", "label": "Adapt to Image" }
      ],
      "default": "h-screen"
    }
  ],
  "presets": [{ "name": "Fresh Start Hero" }]
}
{% endschema %}
