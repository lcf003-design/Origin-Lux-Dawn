{% style %}
  .gucci-spread-section {
    padding: 20px 0;
    background-color: {{ section.settings.bg_color }};
    overflow: hidden;
  }

  .gucci-spread-container {
    max-width: 1800px;
    margin: 0 auto;
    padding: 0 20px;
  }

  /* --- THE GRID (2 MASSIVE IMAGES) --- */
  .gucci-spread-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 20px;
    align-items: center;
  }

  @media (min-width: 990px) {
    .gucci-spread-grid {
      grid-template-columns: 1fr 1fr; /* Split 50/50 */
      gap: 40px;
      align-items: end; /* Align bottom so thumbnails sit nicely */
    }
  }

  /* --- IMAGES --- */
  .gs-image-wrapper {
    position: relative;
    width: 100%;
    background-color: #f6f6f6; /* Subtle backing */
    aspect-ratio: 0.8; /* Portrait aspect ratio like Gucci */
    overflow: hidden;
  }

  .gs-image-wrapper img {
    width: 100%;
    height: 100%;
    object-fit: contain; /* Shows whole bag, doesn't crop */
    object-position: center;
    transition: opacity 0.4s ease;
  }

  /* --- RIGHT SIDE COLUMN (With Thumbnails) --- */
  .gs-right-column {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  /* --- THUMBNAIL CAROUSEL --- */
  .gs-thumbnails-wrapper {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 10px;
    justify-content: flex-end; /* Align to right like screenshot */
  }

  .gs-thumb-scroller {
    display: flex;
    gap: 8px;
    overflow-x: auto;
    scroll-behavior: smooth;
    max-width: 400px; /* Don't let it stretch too wide */
    padding-bottom: 5px;
    /* Hide scrollbar */
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .gs-thumb-scroller::-webkit-scrollbar { display: none; }

  .gs-thumb {
    min-width: 50px;
    height: 50px;
    border: 1px solid transparent;
    cursor: pointer;
    opacity: 0.6;
    transition: all 0.2s;
  }
  
  .gs-thumb img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .gs-thumb:hover, .gs-thumb.active {
    opacity: 1;
    border: 1px solid #000;
  }

  /* Navigation Arrows */
  .gs-nav-btn {
    background: #e0e0e0;
    border: none;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
  }
  .gs-nav-btn:hover { background: #ccc; }
  .gs-nav-btn svg { width: 12px; height: 12px; }

{% endstyle %}

<div class="gucci-spread-section">
  <div class="gucci-spread-container">
    
    <div class="gucci-spread-grid">
      
      <!-- LEFT HERO IMAGE (Image 1) -->
      <div class="gs-image-wrapper">
        {% if product.featured_media %}
          <img id="gs-main-left" 
               src="{{ product.featured_media | image_url: width: 1200 }}" 
               alt="{{ product.title }}"
               loading="eager">
        {% else %}
          {{ 'product-1' | placeholder_svg_tag }}
        {% endif %}
      </div>

      <!-- RIGHT HERO IMAGE (Image 2 + Thumbnails) -->
      <div class="gs-right-column">
        <div class="gs-image-wrapper">
          {% if product.media.size > 1 %}
            <img id="gs-main-right" 
                 src="{{ product.media[1] | image_url: width: 1200 }}" 
                 alt="{{ product.title }}"
                 loading="eager">
          {% else %}
             <!-- Duplicate first image if only 1 exists -->
             <img id="gs-main-right" 
                 src="{{ product.featured_media | image_url: width: 1200 }}" 
                 alt="{{ product.title }}">
          {% endif %}
        </div>

        <!-- THUMBNAILS CAROUSEL -->
        <div class="gs-thumbnails-wrapper">
          <button class="gs-nav-btn prev" onclick="scrollThumbs(-1)">
            <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>
          </button>
          
          <div class="gs-thumb-scroller" id="gsThumbScroller">
            {% for media in product.media %}
              <div class="gs-thumb {% if forloop.first %}active{% endif %}" 
                   onclick="updateSpread(this, '{{ media | image_url: width: 1200 }}')">
                <img src="{{ media | image_url: width: 100 }}" alt="Thumbnail">
              </div>
            {% endfor %}
          </div>

          <button class="gs-nav-btn next" onclick="scrollThumbs(1)">
            <svg viewBox="0 0 24 24"><path d="M9 18l6-6-6-6"/></svg>
          </button>
        </div>
      </div>

    </div>

  </div>
</div>

<script>
  // Script to handle interactions
  function updateSpread(thumb, largeSrc) {
    // 1. Highlight the active thumbnail
    document.querySelectorAll('.gs-thumb').forEach(t => t.classList.remove('active'));
    thumb.classList.add('active');

    // 2. Update the RIGHT image (The "Detail" side)
    // Gucci logic: Left side usually stays static (Front), Right side cycles through details
    const rightImage = document.getElementById('gs-main-right');
    
    rightImage.style.opacity = 0; // Fade out
    setTimeout(() => {
      rightImage.src = largeSrc;
      rightImage.style.opacity = 1; // Fade in
    }, 200);
  }

  function scrollThumbs(direction) {
    const scroller = document.getElementById('gsThumbScroller');
    const scrollAmount = 200; // Pixel amount to scroll
    scroller.scrollBy({
      left: direction * scrollAmount,
      behavior: 'smooth'
    });
  }
</script>

{% schema %}
{
  "name": "Gucci Spread Gallery",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#F5F5F5"
    }
  ],
  "presets": [
    {
      "name": "Gucci Spread Gallery"
    }
  ]
}
{% endschema %}


