{% schema %}
{
  "name": "Origin GG Hero",
  "class": "origin-hero-section",
  "settings": [
    {
      "type": "header",
      "content": "Media Settings"
    },
    {
      "type": "image_picker",
      "id": "image_desktop",
      "label": "Desktop Image"
    },
    {
      "type": "image_picker",
      "id": "image_mobile",
      "label": "Mobile Image",
      "info": "If blank, desktop image is used."
    },
    {
      "type": "video",
      "id": "video_desktop",
      "label": "Desktop Video (Optional)",
      "info": "MP4/Shopify Hosted. Overrides image if set."
    },
    {
      "type": "video",
      "id": "video_mobile",
      "label": "Mobile Video (Optional)"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "min": 0,
      "max": 60,
      "step": 5,
      "unit": "%",
      "label": "Black Overlay Opacity",
      "default": 20
    },
    {
      "type": "header",
      "content": "Text Settings"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "THE COLLECTION"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "New Arrivals"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#FFFFFF"
    },
    {
      "type": "select",
      "id": "text_position",
      "label": "Text Position",
      "default": "center",
      "options": [
        { "value": "center", "label": "Center" },
        { "value": "bottom-center", "label": "Bottom Center" },
        { "value": "bottom-left", "label": "Bottom Left" }
      ]
    },
    {
      "type": "header",
      "content": "Buttons (Guaranteed Even)"
    },
    {
      "type": "text",
      "id": "btn_label_1",
      "label": "Button 1 Label",
      "default": "SHOP WOMEN"
    },
    {
      "type": "url",
      "id": "btn_link_1",
      "label": "Button 1 Link"
    },
    {
      "type": "text",
      "id": "btn_label_2",
      "label": "Button 2 Label",
      "default": "SHOP MEN"
    },
    {
      "type": "url",
      "id": "btn_link_2",
      "label": "Button 2 Link"
    },
    {
      "type": "color",
      "id": "btn_bg_color",
      "label": "Button Background",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "btn_text_color",
      "label": "Button Text",
      "default": "#000000"
    }
  ],
  "presets": [
    {
      "name": "Origin GG Hero"
    }
  ]
}
{% endschema %}
{% style %}
  .origin-hero {
    position: relative;
    width: 100%;
    height: 100vh; /* Full screen height */
    min-height: 600px;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #000;
  }

  /* --- PARALLAX BACKGROUND --- */
  .origin-hero__media-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 120%; /* Taller than container for parallax movement */
    z-index: 0;
    will-change: transform;
    transform: translateY(0);
  }

  .origin-hero__media {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .origin-hero__overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000;
    opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};
    z-index: 1;
    pointer-events: none;
  }

  /* --- CONTENT LAYER --- */
  .origin-hero__content {
    position: relative;
    z-index: 10;
    width: 100%;
    max-width: 1400px;
    padding: 0 40px;
    display: flex;
    flex-direction: column;
    color: {{ section.settings.text_color }};
  }

  /* Positioning Logic */
  .pos-center { align-items: center; text-align: center; justify-content: center; }
  .pos-bottom-center { align-items: center; text-align: center; justify-content: flex-end; padding-bottom: 80px; height: 100%; }
  .pos-bottom-left { align-items: flex-start; text-align: left; justify-content: flex-end; padding-bottom: 80px; height: 100%; }

  /* --- TYPOGRAPHY ANIMATIONS --- */
  .hero-animate {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 1s cubic-bezier(0.2, 0.8, 0.2, 1), transform 1s cubic-bezier(0.2, 0.8, 0.2, 1);
  }

  .origin-hero.is-loaded .hero-animate {
    opacity: 1;
    transform: translateY(0);
  }

  /* Stagger Delays */
  .delay-1 { transition-delay: 0.2s; }
  .delay-2 { transition-delay: 0.4s; }
  .delay-3 { transition-delay: 0.6s; }

  .origin-hero__subheading {
    font-size: 14px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    margin-bottom: 16px;
    font-weight: 600;
  }

  .origin-hero__heading {
    font-size: clamp(40px, 8vw, 120px); /* Responsive Huge Text */
    line-height: 0.9;
    text-transform: uppercase;
    margin: 0 0 32px 0;
    font-family: serif; /* Uses your theme's serif font */
    font-weight: 400;
  }

  /* --- BUTTONS (THE FIX) --- */
  .origin-hero__buttons {
    display: flex;
    gap: 20px; /* Even spacing between buttons */
    flex-wrap: wrap;
    justify-content: center; /* Keeps them centered relative to each other */
  }

  .pos-bottom-left .origin-hero__buttons {
    justify-content: flex-start;
  }

  .origin-hero-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 16px 40px;
    min-width: 180px; /* Ensures both buttons are same width if text varies slightly */
    font-size: 13px;
    letter-spacing: 0.1em;
    font-weight: 700;
    text-transform: uppercase;
    text-decoration: none;
    transition: all 0.3s ease;
    background-color: {{ section.settings.btn_bg_color }};
    color: {{ section.settings.btn_text_color }};
    border: 1px solid {{ section.settings.btn_bg_color }};
  }

  .origin-hero-btn:hover {
    background-color: transparent;
    color: {{ section.settings.text_color }};
    border-color: {{ section.settings.text_color }};
  }

  /* --- MOBILE --- */
  @media (max-width: 768px) {
    .origin-hero { height: 90vh; } /* Address bar fix */
    .origin-hero__heading { font-size: 48px; }
    .origin-hero__buttons {
        flex-direction: column;
        gap: 12px;
        width: 100%;
        align-items: center;
    }
    .origin-hero-btn { width: 100%; max-width: 300px; }
  }
{% endstyle %}
<div class="origin-hero" id="OriginHero-{{ section.id }}">
  
  <div class="origin-hero__media-container" id="HeroParallax-{{ section.id }}">
    
    <div class="hidden-mobile" style="width: 100%; height: 100%;">
      {% if section.settings.video_desktop %}
        {{ section.settings.video_desktop | video_tag: autoplay: true, loop: true, muted: true, controls: false, class: 'origin-hero__media', image_size: '2000x' }}
      {% elsif section.settings.image_desktop %}
        <img src="{{ section.settings.image_desktop | image_url: width: 2400 }}" width="{{ section.settings.image_desktop.width }}" height="{{ section.settings.image_desktop.height }}" class="origin-hero__media" alt="{{ section.settings.heading }}">
      {% else %}
        {{ 'lifestyle-2' | placeholder_svg_tag: 'origin-hero__media' }}
      {% endif %}
    </div>

    <div class="hidden-desktop" style="width: 100%; height: 100%; display: none;">
      {% if section.settings.video_mobile %}
        {{ section.settings.video_mobile | video_tag: autoplay: true, loop: true, muted: true, controls: false, class: 'origin-hero__media', image_size: '1000x' }}
      {% elsif section.settings.image_mobile %}
        <img src="{{ section.settings.image_mobile | image_url: width: 1200 }}" width="{{ section.settings.image_mobile.width }}" height="{{ section.settings.image_mobile.height }}" class="origin-hero__media" alt="{{ section.settings.heading }}">
      {% else %}
        {% if section.settings.image_desktop %}
          <img src="{{ section.settings.image_desktop | image_url: width: 1200 }}" width="{{ section.settings.image_desktop.width }}" height="{{ section.settings.image_desktop.height }}" class="origin-hero__media" alt="{{ section.settings.heading }}">
        {% else %}
          {{ 'lifestyle-2' | placeholder_svg_tag: 'origin-hero__media' }}
        {% endif %}
      {% endif %}
    </div>
  </div>

  <div class="origin-hero__overlay"></div>

  <div class="origin-hero__content pos-{{ section.settings.text_position }}">
    
    {% if section.settings.subheading != blank %}
      <div class="origin-hero__subheading hero-animate delay-1">
        {{ section.settings.subheading }}
      </div>
    {% endif %}

    {% if section.settings.heading != blank %}
      <h2 class="origin-hero__heading hero-animate delay-2">
        {{ section.settings.heading }}
      </h2>
    {% endif %}

    <div class="origin-hero__buttons hero-animate delay-3">
      {% if section.settings.btn_link_1 != blank %}
        <a href="{{ section.settings.btn_link_1 }}" class="origin-hero-btn">
          {{ section.settings.btn_label_1 }}
        </a>
      {% endif %}
      
      {% if section.settings.btn_link_2 != blank %}
        <a href="{{ section.settings.btn_link_2 }}" class="origin-hero-btn">
          {{ section.settings.btn_label_2 }}
        </a>
      {% endif %}
    </div>

  </div>
</div>
<style>
  /* Mobile Helper Utility */
  @media (max-width: 768px) {
    .hidden-mobile { display: none !important; }
    .hidden-desktop { display: block !important; }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const section = document.getElementById('OriginHero-{{ section.id }}');
    const parallaxBg = document.getElementById('HeroParallax-{{ section.id }}');

    // 1. Trigger Entrance Animation
    // We use a slight timeout to ensure CSS transitions trigger after render
    setTimeout(() => {
      section.classList.add('is-loaded');
    }, 100);

    // 2. Parallax Effect Logic
    function handleParallax() {
      const scrollY = window.scrollY;
      const sectionHeight = section.offsetHeight;
      
      // Only animate if the section is in view to save performance
      if (scrollY <= sectionHeight) {
        // Move background at 40% speed of scroll
        const yPos = scrollY * 0.4; 
        parallaxBg.style.transform = `translateY(${yPos}px)`;
      }
    }

    // Use requestAnimationFrame for smooth performance
    let ticking = false;
    window.addEventListener('scroll', function() {
      if (!ticking) {
        window.requestAnimationFrame(function() {
          handleParallax();
          ticking = false;
        });
        ticking = true;
      }
    }, { passive: true });
  });
</script>
